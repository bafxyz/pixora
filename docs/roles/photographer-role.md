# Роль: Photographer (Фотограф)

## Описание роли
Photographer - это роль фотографа в системе Pixora. Основная задача - проведение фотосессий, загрузка и управление фотографиями, работа с гостями на мероприятиях. Имеет доступ только к своим фотосессиям и загруженным фото.

## Права доступа

### Основные возможности
- ✅ Создание фотосессий
- ✅ Загрузка фотографий
- ✅ Сканирование QR кодов гостей
- ✅ Генерация QR кодов для новых гостей
- ✅ Просмотр своих заказов
- ✅ Настройка брендинга галереи
- ❌ Доступ к фото других фотографов
- ❌ Управление другими пользователями
- ❌ Доступ к финансовой статистике студии

### Доступные страницы
- `/photographer` - Главная панель фотографа
- `/dashboard` - Личный дашборд
- `/session/*` - Просмотр своих фотосессий

### API Endpoints

#### Основные endpoints
- `POST /api/photos/save` - Сохранение загруженных фото
- `POST /api/photo-sessions` - Создание новой фотосессии
- `GET /api/photo-sessions` - Получение своих фотосессий
- `POST /api/qr/scan` - Сканирование QR кода гостя
- `POST /api/qr/generate` - Генерация QR кода

#### Ограниченный доступ
- `GET /api/studio-admin/stats` - ❌ Запрещено
- `GET /api/admin/*` - ❌ Запрещено

## Функциональные возможности

### 1. Управление фотосессиями
```typescript
interface PhotoSessionFeatures {
  // Создание новой сессии
  create: {
    name: string
    description?: string
    scheduledAt?: Date
    location?: string
  }

  // Управление сессией
  manage: {
    uploadPhotos: (files: File[]) => void
    selectBestPhotos: (photoIds: string[]) => void
    archiveSession: () => void
  }

  // Просмотр статистики
  stats: {
    uploadedPhotos: number
    selectedPhotos: number
    viewsCount: number
    ordersCount: number
  }
}
```

### 2. Загрузка фотографий

#### Процесс загрузки:
1. **Выбор файлов**
   - Drag & drop интерфейс
   - Множественный выбор
   - Поддержка JPG, PNG, WebP
   - Максимум 10MB на файл

2. **Привязка фото**
   - К конкретному гостю (Guest ID)
   - К фотосессии (Session ID)
   - Автоматическая организация в папки

3. **Обработка**
   - Загрузка в Supabase Storage
   - Сохранение метаданных в БД
   - Установка срока хранения (14 дней)

#### Интерфейс загрузки:
```typescript
interface PhotoUploadInterface {
  // Компонент PhotoUpload
  features: {
    dragAndDrop: boolean
    preview: boolean
    progressBar: boolean
    bulkUpload: boolean
    errorHandling: boolean
  }

  // Callbacks
  onUploadComplete: (urls: string[], targetId: string) => void
  onUploadError: (error: string) => void
}
```

### 3. Работа с гостями на мероприятии

#### Вкладка "Scan" (Сканирование)
- Камера для сканирования QR кодов
- Автоматическое добавление гостя в список
- Звуковое подтверждение успешного сканирования
- История сканирований текущей сессии

#### Вкладка "Create QR" (Создание QR)
- Форма для новых гостей
- Мгновенная генерация QR кода
- Возможность печати или отправки
- Сохранение в базе данных

#### Вкладка "Guests" (Гости)
- Список всех отсканированных гостей
- Количество загруженных фото для каждого
- Быстрая загрузка фото для выбранного гостя
- Поиск и фильтрация

### 4. Настройки брендинга
```typescript
interface BrandingSettings {
  brandColor: string      // Основной цвет интерфейса
  logoUrl: string         // URL логотипа студии
  welcomeMessage: string  // Приветственное сообщение
  watermark?: {
    enabled: boolean
    position: 'corner' | 'center'
    opacity: number
  }
}
```

## Интерфейс фотографа

### Главная страница `/photographer`

#### Структура интерфейса:
```
┌─────────────────────────────────────┐
│      Event Management Header        │
├─────────────────────────────────────┤
│  [Scan] [Create QR] [Guests (12)]  │
├─────────────────────────────────────┤
│                                     │
│        Active Tab Content           │
│                                     │
└─────────────────────────────────────┘
```

### PhotographerDashboard компонент

#### Вкладки:
1. **Upload (Загрузка)**
   - PhotoUpload компонент
   - Preview галереи гостя
   - Статус загрузки

2. **Orders (Заказы)**
   - Список заказов с фото фотографа
   - Статусы: pending, processing, completed
   - Детали заказа

3. **Settings (Настройки)**
   - Настройка цветов и логотипа
   - Предпросмотр галереи
   - Личные настройки

## Workflow фотографа

### Типичный день на мероприятии

```mermaid
1. Подготовка
   ├── Создание фотосессии
   ├── Генерация QR для VIP гостей
   └── Проверка оборудования

2. Мероприятие
   ├── Сканирование QR гостей
   ├── Фотосъемка
   └── Быстрая загрузка превью

3. После мероприятия
   ├── Полная загрузка фото
   ├── Отбор лучших кадров
   └── Отправка уведомлений гостям
```

### Процесс работы с гостем

1. **Регистрация гостя**
   - Сканирование QR или создание нового
   - Добавление в список сессии

2. **Фотосъемка**
   - Индивидуальные фото
   - Групповые фото
   - Репортажная съемка

3. **Загрузка фото**
   - Выбор фото для гостя
   - Указание Guest ID
   - Загрузка в систему

4. **Доступ для гостя**
   - Автоматическое появление в галерее
   - Уведомление по email/SMS
   - Возможность заказа

## Ограничения роли

### Изоляция данных
```typescript
// Все запросы фильтруются по photographerId
const photos = await prisma.photo.findMany({
  where: {
    photographerId: auth.user.id,  // Только свои фото
    clientId: auth.clientId         // Только своя студия
  }
})
```

### Что НЕ может фотограф
- ❌ Видеть фото других фотографов
- ❌ Изменять цены на услуги
- ❌ Удалять чужие фотосессии
- ❌ Просматривать полную статистику студии
- ❌ Создавать новых фотографов
- ❌ Изменять настройки студии

## Мобильная работа

### Оптимизация для мобильных
- Адаптивный интерфейс для планшетов
- Крупные кнопки для тач-скрина
- Оффлайн режим для сканирования QR
- Быстрая загрузка через мобильный интернет

### Рекомендуемые устройства
- iPad/планшет для сканирования на мероприятии
- Ноутбук для массовой загрузки фото
- Смартфон для быстрой проверки статуса

## Метрики и KPI

### Отслеживаемые показатели
```typescript
interface PhotographerMetrics {
  daily: {
    uploadedPhotos: number
    scannedGuests: number
    processingTime: number // минут на обработку
  }

  weekly: {
    totalSessions: number
    totalPhotos: number
    averagePhotosPerGuest: number
  }

  quality: {
    selectedRatio: number // % отобранных фото
    orderConversion: number // % гостей с заказами
    customerSatisfaction: number // рейтинг
  }
}
```

## Советы по эффективной работе

### Best Practices

1. **Перед мероприятием**
   - Создать фотосессию заранее
   - Проверить интернет-соединение
   - Зарядить все устройства
   - Подготовить QR коды для печати

2. **Во время съемки**
   - Регулярно синхронизировать список гостей
   - Делать резервные копии на карту памяти
   - Отмечать VIP гостей

3. **После мероприятия**
   - Загружать фото в течение 24 часов
   - Отбирать лучшие кадры (30-40% от общего числа)
   - Проверять качество перед публикацией

### Частые проблемы и решения

| Проблема | Решение |
|----------|---------|
| Медленная загрузка | Уменьшить размер фото перед загрузкой |
| QR код не сканируется | Проверить освещение и фокус камеры |
| Гость не видит фото | Проверить Guest ID и статус isSelected |
| Ошибка при загрузке | Проверить размер файла (<10MB) |

## Обучение и поддержка

### Материалы для обучения
- Видео-инструкция по первой фотосессии (15 мин)
- Чек-лист подготовки к мероприятию
- Гайд по обработке и отбору фото
- FAQ по частым вопросам

### Техподдержка
- Чат для фотографов в Telegram
- Email: photographers@pixora.com
- Горячая линия во время мероприятий

## Интеграция с внешними сервисами

### Поддерживаемые интеграции
- **Lightroom** - экспорт обработанных фото
- **Google Photos** - резервное копирование
- **WhatsApp Business** - отправка ссылок гостям
- **Instagram** - публикация превью с водяным знаком

---

**Важно**: Фотограф - это лицо студии на мероприятии. От качества работы фотографа напрямую зависит удовлетворенность клиентов и репутация студии. Следуйте инструкциям и поддерживайте высокие стандарты качества.