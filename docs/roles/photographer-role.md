# Роль: Photographer (Фотограф)

## Описание
Photographer - роль фотографа для проведения фотосессий, загрузки фото и работы с гостями. Имеет доступ только к своим фотосессиям.

## Права доступа

### Основные возможности
- ✅ Создание фотосессий
- ✅ Загрузка фотографий
- ✅ Сканирование QR кодов гостей
- ✅ Генерация QR кодов
- ❌ Доступ к фото других фотографов
- ❌ Управление пользователями
- ❌ Финансовая статистика студии

### Доступные страницы
- `/photographer` - Главная панель
- `/photographer/upload` - Загрузка фото
- `/photographer/sessions` - Список фотосессий
- `/session/[id]` - Просмотр своих сессий

### API Endpoints
```
POST /api/photos/save - Загрузка фото
POST /api/photo-sessions - Создание фотосессии
GET /api/photo-sessions - Список своих фотосессий
POST /api/qr/scan - Сканирование QR
POST /api/qr/generate - Генерация QR
```

## Основной Workflow

### 1. Перед мероприятием
1. Создать фотосессию
2. Сгенерировать QR коды для VIP гостей (опционально)

### 2. На мероприятии
1. Сканировать QR коды гостей
2. Вести фотосъемку
3. Быстрая загрузка превью (опционально)

### 3. После мероприятия
1. Отобрать лучшие кадры локально
2. Загрузить отобранные фото в систему
3. Гости автоматически получают доступ к загруженным фото

## Загрузка фото

### Интерфейс PhotoUpload
- Drag & drop файлов
- Множественный выбор
- Привязка к `photoSessionId`
- Прогресс загрузки
- Поддержка JPG, PNG, WebP (макс 10MB)

### Процесс
```typescript
1. Выбор файлов (фотограф сам отбирает перед загрузкой)
2. Загрузка в Supabase Storage (photos/{sessionId}/)
3. Сохранение метаданных в БД
4. Установка expiresAt (14 дней)
5. Фото сразу видны гостям
```

## Работа с гостями

### Сканирование QR
- Камера для сканирования QR
- Автодобавление гостя в сессию
- История сканирований

### Генерация QR
- Создание нового гостя
- Мгновенная генерация QR
- Возможность печати/отправки

## Безопасность

### Изоляция данных
```typescript
// Фильтрация по photographerId
const photos = await prisma.photo.findMany({
  where: {
    photographerId: auth.user.id,
    clientId: auth.clientId
  }
});
```

### Middleware
```typescript
if (pathname.startsWith("/photographer")) {
  if (!["photographer", "studio-admin", "admin"].includes(user?.user_metadata?.role)) {
    return redirectToLogin(request);
  }
}
```

## Ограничения

- ❌ Видеть фото других фотографов
- ❌ Изменять цены
- ❌ Удалять чужие сессии
- ❌ Просматривать полную статистику студии
- ❌ Создавать фотографов

## Best Practices

1. **Отбор фото** - отбирать 30-40% лучших кадров перед загрузкой
2. **Своевременность** - загружать фото в течение 24 часов
3. **Качество** - проверять перед загрузкой
4. **Организация** - использовать фотосессии для группировки