# Роль: Guest (Гость/Клиент)

## Описание
Guest - конечный клиент, получающий доступ к своим фотографиям с мероприятий. Доступ через QR код или прямую ссылку без регистрации.

## Права доступа

### Основные возможности
- ✅ Просмотр своих фотографий
- ✅ Добавление фото в корзину
- ✅ Оформление заказа
- ✅ Скачивание превью с водяным знаком
- ✅ Скачивание оплаченных фото в полном качестве
- ❌ Доступ к фото других гостей
- ❌ Изменение цен
- ❌ Удаление фотографий

### Доступные страницы
- `/session/[id]` - Галерея фотосессии
- `/session/[id]/gallery` - Полная галерея с фильтрами

### API Endpoints
```
GET /api/session/[id] - Данные сессии и фото
POST /api/payments/create-session - Создание оплаты (Stripe)
```

## User Journey

### 1. Получение доступа
- **QR код** - сканирование на мероприятии
- **Ссылка** - email/SMS от студии
- **Прямой URL** - `/session/{sessionId}`

### 2. Просмотр галереи
```
Интерфейс:
- Сетка фотографий (адаптивная)
- Lightbox для полноэкранного просмотра
- Превью с водяным знаком (бесплатно)
```

### 3. Выбор и заказ
1. Добавление фото в корзину
2. Выбор пакета (одно фото / все фото)
3. Оформление заказа
4. Оплата через Stripe

### 4. После оплаты
- Скачивание фото в полном качестве
- Без водяных знаков
- Доступ бессрочный

## Качество изображений

```typescript
thumbnail: 300x300, watermark: true, free: true
preview: 1200x800, watermark: true, free: true
full: original, watermark: false, requiresPurchase: true
```

## Корзина

```typescript
interface Cart {
  items: CartItem[]
  packages: {
    single: { price: number }
    allPhotos: { price: number, discount: "50%" }
  }
  total: number
}
```

## Временные ограничения

- **Срок хранения фото**: 14 дней (настраивается)
- **Доступ к оплаченным фото**: бессрочный

## Безопасность

### Доступ к фото
```typescript
// Гость видит все фото из своей сессии
function canAccessPhoto(guest: Guest, photo: Photo): boolean {
  return photo.sessionId === guest.sessionId;
}
```

### Правила использования
- ✅ Личное использование
- ✅ Публикация в соцсетях с указанием студии
- ❌ Перепродажа
- ❌ Удаление водяных знаков без покупки

## Оплата

### Способы
1. **Онлайн (Stripe)** - карта, мгновенный доступ
2. **В студии** - резервирование, оплата при визите
3. **Банковский перевод** - для корпоративных клиентов

### После оплаты
- Немедленный доступ к скачиванию
- Email подтверждение
- Облачное хранение 90 дней

## Мобильная версия

- Адаптивный дизайн
- Touch-жесты (swipe, pinch, double tap)
- Lazy loading изображений
- Offline mode (ограниченный)

## FAQ

**Q: Как долго хранятся фотографии?**
A: 14 дней для просмотра. После покупки - бессрочно.

**Q: Можно ли скачать бесплатно?**
A: Только превью с водяным знаком.

**Q: Как поделиться галереей?**
A: Отправьте ссылку или покажите QR код.

**Q: Что если не могу найти фото?**
A: Проверьте ссылку или обратитесь в студию.