# Роль: Studio Admin (Администратор студии)

## Описание
Studio Admin управляет всеми аспектами работы фотостудии: фотографами, фотосессиями, заказами. Имеет доступ только к данным своей студии (client_id).

## Права доступа

### Основные возможности
- ✅ Управление фотографами студии
- ✅ Просмотр всех фотосессий и заказов студии
- ✅ Настройка брендинга студии
- ✅ Просмотр статистики студии
- ✅ Загрузка фото (как photographer)
- ❌ Доступ к данным других студий
- ❌ Изменение системных настроек

### Доступные страницы
- `/studio-admin` - Панель администратора студии
- `/photographer` - Функции фотографа
- `/session/*` - Все фотосессии студии

### API Endpoints
```
GET /api/studio-admin/stats - Статистика студии
POST /api/photographer/photographers - Создание фотографа
PATCH /api/photographer/photographers/[id] - Обновление фотографа
POST /api/photo-sessions - Создание фотосессии
POST /api/photos/save - Загрузка фото
```

## Функциональность

### 1. Управление фотографами
Создание, редактирование, деактивация фотографов. Просмотр их статистики.

### 2. Статистика студии
- Количество фотографов
- Количество фотосессий
- Загружено фото
- Заказы и выручка

### 3. Настройки студии
- Логотип и цвета
- Email уведомления
- Цены на услуги

## Безопасность

### Изоляция данных (RLS)
Все запросы фильтруются по `client_id`:

```typescript
const auth = await withRoleCheck(['studio-admin', 'admin'], request);
// Автоматическая фильтрация через auth.clientId
```

### Middleware
```typescript
if (pathname.startsWith("/studio-admin")) {
  if (!["studio-admin", "admin"].includes(user?.user_metadata?.role)) {
    return redirectToLogin(request);
  }
}
```

## Отличия от Photographer

| Функция | Studio Admin | Photographer |
|---------|-------------|--------------|
| Загрузка фото | ✅ Все сессии | ✅ Свои сессии |
| Просмотр заказов | ✅ Все заказы | ✅ Свои заказы |
| Управление фотографами | ✅ | ❌ |
| Статистика студии | ✅ Полная | ❌ |
| Настройки студии | ✅ | ❌ |